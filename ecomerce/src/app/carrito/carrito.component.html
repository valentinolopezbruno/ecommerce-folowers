<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito de Compras</title>
</head>

<app-header></app-header>
<body>
  <div class="checkout-container">
    <div class="cart">
      <h2 class="cart-title">Tu Carrito</h2>
      <mat-card class="cart-card">
        <table mat-table [dataSource]="datosEntrada" class="cart-table">
          <ng-container matColumnDef="redsocialimg">
            <th mat-header-cell *matHeaderCellDef>Red Social</th>
            <td mat-cell *matCellDef="let elemento">
              <img
                src="{{ elemento.productoimg }}"
                alt="redsocialimg"
                style="width: 70px; margin: 5px 0; display: block;"
              />
            </td>
          </ng-container>
      
          <ng-container matColumnDef="producto">
            <th mat-header-cell *matHeaderCellDef>Producto</th>
            <td mat-cell *matCellDef="let elemento">
              <span style="max-width: 20rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: block;">
                {{ elemento.producto }}
              </span>
            </td>
          </ng-container>
      
          <ng-container matColumnDef="precio">
            <th mat-header-cell *matHeaderCellDef>Precio</th>
            <td mat-cell *matCellDef="let elemento">
              {{ elemento.precio | currency }}
            </td>
          </ng-container>
      
          <ng-container matColumnDef="cantidad">
            <th mat-header-cell *matHeaderCellDef>Cantidad</th>
            <td mat-cell *matCellDef="let elemento">
              <span>{{ elemento.cantidad }}</span>
            </td>
          </ng-container>
      
          <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef>Total</th>
            <td mat-cell *matCellDef="let elemento">
              {{ elemento.precio * elemento.cantidad | currency }}
            </td>
          </ng-container>
      
          <ng-container matColumnDef="accion">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let elemento">
              <button
                (click)="eliminarProducto(elemento)"
                mat-mini-fab
                color="warn"
                style="margin-left: 10px;"
              >
                <mat-icon>close</mat-icon>
              </button>
            </td>
          </ng-container>
      
          <tr mat-row *matRowDef="let eow; columns: displayColumnas" style="display: flex; flex-wrap: wrap;"></tr>
        </table>
        <div *ngIf="carrito.productos.length" class="cart-buttons">
          <button mat-button color="warn" (click)="limpiarCarrito()">Borrar Todo</button>
          <button mat-button color="primary" *ngIf="!monedaActual" (click)="pagarMP()">Terminar Compra (MP)</button>
          <button mat-button color="primary" *ngIf="monedaActual" (click)="pagarPaypal()">Terminar Compra (PayPal)</button>
        </div>
        <div class="cart-total">
          Total: {{ getTotal(carrito.productos) | currency }}
        </div>
      </mat-card>
    </div>
    <div class="order-summary">
      <h2 class="order-summary-title">Resumen de Orden</h2>
      <mat-card class="order-card">
        <div class="order-total">
          <p>Total:</p>
          <p class="order-total-amount">{{ getTotal(carrito.productos) | currency }}</p>
        </div>
        <button mat-button class="checkout-button" *ngIf="!monedaActual" (click)="pagarMP()">Terminar Compra (MP)</button>
        <button mat-button class="checkout-button" *ngIf="monedaActual" (click)="pagarPaypal()">Terminar Compra (PayPal)</button>
      </mat-card>
    </div>
  </div>
  <mat-card *ngIf="!carrito.productos.length" class="empty-cart">
    <p>Su carrito está vacío.</p>
    <button mat-button color="primary" routerLink="/home">Click para seleccionar productos</button>
  </mat-card>

</body>

<app-footer></app-footer>
</html>





<div id="wallet_container"></div>
<script src="https://sdk.mercadopago.com/js/v2"></script>
